<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper

		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		
<mapper namespace="com.bside.BSIDE.contents.persistence.CategoryMapper">

	<!--  답변한 카테고리를 제외한 카테고리 랜덤 조회 -->
	<select id="getRandomCategory" resultType="com.bside.BSIDE.contents.domain.CategoryDto" parameterType="int">
		SELECT c.category_id as categoryId, c.category_name as categoryName
		FROM bside.category c
		LEFT JOIN bside.user_category uc ON c.category_id = uc.category_id AND uc.user_id = #{userId}
		WHERE uc.user_id IS NULL
		ORDER BY RAND() LIMIT 1
	</select>
	
</mapper>